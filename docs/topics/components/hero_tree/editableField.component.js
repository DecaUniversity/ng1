"use strict";

var EditableFieldController = function EditableFieldController($scope, $element, $attrs) {

	var ctrl = this;

	ctrl.editMode = false;

	ctrl.handleModeChange = function () {

		console.log("EditableFieldController.handleModeChange.\n\t\t\teditMode(" + ctrl.editMode + ")");

		if (ctrl.editMode) {

			ctrl.onUpdate({ value: ctrl.fieldValue });
			ctrl.fieldValueCopy = ctrl.fieldValue;
		}

		ctrl.editMode = !ctrl.editMode;
	};

	ctrl.delete = function () {

		ctrl.onDelete();
	};

	ctrl.reset = function () {

		ctrl.fieldValue = ctrl.fieldValueCopy;
	};

	ctrl.$onInit = function () {

		// Make a copy of the initial value to be able to reset it later
		ctrl.fieldValueCopy = ctrl.fieldValue;

		// Set a default fieldType
		if (!ctrl.fieldType) {

			/**
    * For any changes to this variable to be shown,
    * the browser must be refreshed.
    */

			ctrl.fieldType = "text";
		}
	};
};

angular.module("main").component("dhEditableField", {
	templateUrl: "topics/components/hero_tree/editableField.html",
	controller: EditableFieldController,
	bindings: {
		fieldLabel: "@?",
		fieldValue: "<",
		// ? assigns the property as optional.
		fieldType: "@?",
		onUpdate: "&",
		onDelete: "&"
	}
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvcGljcy9jb21wb25lbnRzL2hlcm9fdHJlZS9lZGl0YWJsZUZpZWxkLmNvbXBvbmVudC5qcyJdLCJuYW1lcyI6WyJFZGl0YWJsZUZpZWxkQ29udHJvbGxlciIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiY3RybCIsImVkaXRNb2RlIiwiaGFuZGxlTW9kZUNoYW5nZSIsImNvbnNvbGUiLCJsb2ciLCJvblVwZGF0ZSIsInZhbHVlIiwiZmllbGRWYWx1ZSIsImZpZWxkVmFsdWVDb3B5IiwiZGVsZXRlIiwib25EZWxldGUiLCJyZXNldCIsIiRvbkluaXQiLCJmaWVsZFR5cGUiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29tcG9uZW50IiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiYmluZGluZ3MiLCJmaWVsZExhYmVsIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSwwQkFBMEIsU0FBMUJBLHVCQUEwQixDQUFVQyxNQUFWLEVBQWtCQyxRQUFsQixFQUE0QkMsTUFBNUIsRUFBb0M7O0FBRW5FLEtBQU1DLE9BQU8sSUFBYjs7QUFFQUEsTUFBS0MsUUFBTCxHQUFnQixLQUFoQjs7QUFFQUQsTUFBS0UsZ0JBQUwsR0FBd0IsWUFBWTs7QUFFbkNDLFVBQVFDLEdBQVIsZ0VBRVlKLEtBQUtDLFFBRmpCOztBQUtBLE1BQUlELEtBQUtDLFFBQVQsRUFBbUI7O0FBRWxCRCxRQUFLSyxRQUFMLENBQWMsRUFBQ0MsT0FBT04sS0FBS08sVUFBYixFQUFkO0FBQ0FQLFFBQUtRLGNBQUwsR0FBc0JSLEtBQUtPLFVBQTNCO0FBRUE7O0FBRURQLE9BQUtDLFFBQUwsR0FBZ0IsQ0FBQ0QsS0FBS0MsUUFBdEI7QUFFQSxFQWhCRDs7QUFrQkFELE1BQUtTLE1BQUwsR0FBYyxZQUFZOztBQUV6QlQsT0FBS1UsUUFBTDtBQUVBLEVBSkQ7O0FBTUFWLE1BQUtXLEtBQUwsR0FBYSxZQUFZOztBQUV4QlgsT0FBS08sVUFBTCxHQUFrQlAsS0FBS1EsY0FBdkI7QUFFQSxFQUpEOztBQU1BUixNQUFLWSxPQUFMLEdBQWUsWUFBWTs7QUFFMUI7QUFDQVosT0FBS1EsY0FBTCxHQUFzQlIsS0FBS08sVUFBM0I7O0FBRUE7QUFDQSxNQUFJLENBQUNQLEtBQUthLFNBQVYsRUFBcUI7O0FBRXBCOzs7OztBQUtBYixRQUFLYSxTQUFMLEdBQWlCLE1BQWpCO0FBRUE7QUFFRCxFQWpCRDtBQW1CQSxDQXZERDs7QUF5REFDLFFBQVFDLE1BQVIsQ0FBZSxNQUFmLEVBQ0VDLFNBREYsQ0FDWSxpQkFEWixFQUMrQjtBQUM3QkMsY0FBYSxnREFEZ0I7QUFFN0JDLGFBQVl0Qix1QkFGaUI7QUFHN0J1QixXQUFVO0FBQ1RDLGNBQVksSUFESDtBQUVUYixjQUFZLEdBRkg7QUFHVDtBQUNBTSxhQUFXLElBSkY7QUFLVFIsWUFBVSxHQUxEO0FBTVRLLFlBQVU7QUFORDtBQUhtQixDQUQvQiIsImZpbGUiOiJ0b3BpY3MvY29tcG9uZW50cy9oZXJvX3RyZWUvZWRpdGFibGVGaWVsZC5jb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgRWRpdGFibGVGaWVsZENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG5cdFxuXHRjb25zdCBjdHJsID0gdGhpcztcblx0XG5cdGN0cmwuZWRpdE1vZGUgPSBmYWxzZTtcblx0XG5cdGN0cmwuaGFuZGxlTW9kZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZyhcblx0XHRcdGBFZGl0YWJsZUZpZWxkQ29udHJvbGxlci5oYW5kbGVNb2RlQ2hhbmdlLlxuXHRcdFx0ZWRpdE1vZGUoJHtjdHJsLmVkaXRNb2RlfSlgXG5cdFx0KTtcblx0XHRcblx0XHRpZiAoY3RybC5lZGl0TW9kZSkge1xuXHRcdFx0XG5cdFx0XHRjdHJsLm9uVXBkYXRlKHt2YWx1ZTogY3RybC5maWVsZFZhbHVlfSk7XG5cdFx0XHRjdHJsLmZpZWxkVmFsdWVDb3B5ID0gY3RybC5maWVsZFZhbHVlO1xuXHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdGN0cmwuZWRpdE1vZGUgPSAhY3RybC5lZGl0TW9kZTtcblx0XHRcblx0fTtcblx0XG5cdGN0cmwuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xuXHRcdFxuXHRcdGN0cmwub25EZWxldGUoKTtcblx0XHRcblx0fTtcblx0XG5cdGN0cmwucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XG5cdFx0Y3RybC5maWVsZFZhbHVlID0gY3RybC5maWVsZFZhbHVlQ29weTtcblx0XHRcblx0fTtcblx0XG5cdGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcblx0XHQvLyBNYWtlIGEgY29weSBvZiB0aGUgaW5pdGlhbCB2YWx1ZSB0byBiZSBhYmxlIHRvIHJlc2V0IGl0IGxhdGVyXG5cdFx0Y3RybC5maWVsZFZhbHVlQ29weSA9IGN0cmwuZmllbGRWYWx1ZTtcblx0XHRcblx0XHQvLyBTZXQgYSBkZWZhdWx0IGZpZWxkVHlwZVxuXHRcdGlmICghY3RybC5maWVsZFR5cGUpIHtcblx0XHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBGb3IgYW55IGNoYW5nZXMgdG8gdGhpcyB2YXJpYWJsZSB0byBiZSBzaG93bixcblx0XHRcdCAqIHRoZSBicm93c2VyIG11c3QgYmUgcmVmcmVzaGVkLlxuXHRcdFx0ICovXG5cdFx0XHRcblx0XHRcdGN0cmwuZmllbGRUeXBlID0gXCJ0ZXh0XCI7XG5cdFx0XHRcblx0XHR9XG5cdFx0XG5cdH07XG5cdFxufTtcblxuYW5ndWxhci5tb2R1bGUoXCJtYWluXCIpXG5cdC5jb21wb25lbnQoXCJkaEVkaXRhYmxlRmllbGRcIiwge1xuXHRcdHRlbXBsYXRlVXJsOiBcInRvcGljcy9jb21wb25lbnRzL2hlcm9fdHJlZS9lZGl0YWJsZUZpZWxkLmh0bWxcIixcblx0XHRjb250cm9sbGVyOiBFZGl0YWJsZUZpZWxkQ29udHJvbGxlcixcblx0XHRiaW5kaW5nczoge1xuXHRcdFx0ZmllbGRMYWJlbDogXCJAP1wiLFxuXHRcdFx0ZmllbGRWYWx1ZTogXCI8XCIsXG5cdFx0XHQvLyA/IGFzc2lnbnMgdGhlIHByb3BlcnR5IGFzIG9wdGlvbmFsLlxuXHRcdFx0ZmllbGRUeXBlOiBcIkA/XCIsXG5cdFx0XHRvblVwZGF0ZTogXCImXCIsXG5cdFx0XHRvbkRlbGV0ZTogXCImXCJcblx0XHR9XG5cdH0pO1xuIl19
